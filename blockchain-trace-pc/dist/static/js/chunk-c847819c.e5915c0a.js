(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c847819c"],{2912:function(t,e,r){},3645:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{center:"",title:"区块详情",visible:t.blockVisible,width:"700px","append-to-body":""},on:{"update:visible":function(e){t.blockVisible=e}}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:"24"}},[t._v(" 编号："),r("el-tag",[t._v(t._s(t.blockInfo.data.header.number))])],1),r("br"),r("br"),r("el-col",{attrs:{span:"24"}},[t._v(" 前置hash："+t._s(t.blockInfo.data.header.previous_hash)+" ")]),r("br"),r("br"),r("el-col",{attrs:{span:"24"}},[t._v(" 数据hash："+t._s(t.blockInfo.data.header.data_hash)+" ")]),r("br"),r("br"),r("el-col",{attrs:{span:"24"}},[t._v(" 交易ID："+t._s(t.blockInfo.data.data.data[0].payload.header.channel_header.tx_id)+" ")]),r("br"),r("br"),r("el-col",{attrs:{span:"24"}},[t._v(" 时间戳："+t._s(t.blockInfo.data.data.data[0].payload.header.channel_header.timestamp)+" ")]),r("br"),r("br"),r("el-col",{attrs:{span:"24"}},[t._v(" 通道："),r("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.blockInfo.data.data.data[0].payload.header.channel_header.channel_id))])],1),r("br"),r("br"),r("el-col",{attrs:{span:"24"}},[t._v(" 智能合约："),r("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.blockInfo.data.data.data[0].payload.data.actions[0].payload.action.proposal_response_payload.extension.chaincode_id.name))])],1),r("br"),r("br"),r("el-col",{attrs:{span:"24"}},[t._v(" 智能合约版本："),r("el-tag",{attrs:{type:"warning"}},[t._v(t._s(t.blockInfo.data.data.data[0].payload.data.actions[0].payload.action.proposal_response_payload.extension.chaincode_id.version))])],1)],1)],1)},o=[],l={name:"BlockInfo",data:function(){return{blockInfo:{},blockVisible:!1,dataDetail:null}},methods:{init:function(t){this.blockVisible=!0,this.blockInfo=t,this.dataDetail=JSON.parse(t.data.data.data[0].payload.data.actions[0].payload.action.proposal_response_payload.extension.results.ns_rwset[0].rwset.writes[0].value)}}},s=l,n=r("2877"),i=Object(n["a"])(s,a,o,!1,null,"ef50b1bc",null);e["default"]=i.exports},5167:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{height:"700px",overflow:"auto"}},[r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("avue-data-tabs",{attrs:{option:t.option}}),r("br"),r("div",[r("div",[r("el-row",[r("el-col",{attrs:{span:24}},[t._v("区块编号："+t._s(t.blockInfo.data.header.number))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v(" 前置Hash： "),r("el-link",{attrs:{type:"success"},on:{click:function(e){return t.queryInfo(t.blockInfo.data.header.previous_hash)}}},[t._v(t._s(t.blockInfo.data.header.previous_hash)),r("span",{staticStyle:{color:"red"}},[t._v("(点击查看区块信息)")])])],1)],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v(" 数据Hash： "),r("el-link",{attrs:{underline:!1,type:"success"}},[t._v(t._s(t.blockInfo.data.header.data_hash))])],1)],1)],1),r("div",{attrs:{align:"center"}},[r("el-divider",{attrs:{"content-position":"left"}},[r("i",{staticClass:"el-icon-top"})])],1),r("div",[r("el-row",[r("el-col",{attrs:{span:24}},[t._v("区块编号："+t._s(t.previousBlockInfo.data.header.number))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v(" 前置Hash： "),r("el-link",{attrs:{type:"success"},on:{click:function(e){return t.queryInfo(t.previousBlockInfo.data.header.previous_hash)}}},[t._v(t._s(t.previousBlockInfo.data.header.previous_hash)),r("span",{staticStyle:{color:"red"}},[t._v("(点击查看区块信息)")])])],1)],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v(" 数据Hash： "),r("el-link",{attrs:{underline:!1,type:"success"}},[t._v(t._s(t.previousBlockInfo.data.header.data_hash))])],1)],1)],1),r("div",{attrs:{align:"center"}},[r("el-divider",{attrs:{"content-position":"left"}},[r("i",{staticClass:"el-icon-top"})])],1),r("div",[r("el-row",[r("el-col",{attrs:{span:24}},[t._v("区块编号："+t._s(t.previousBlockInfo2.data.header.number))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v(" 前置Hash： "),r("el-link",{attrs:{type:"success"},on:{click:function(e){return t.queryInfo(t.previousBlockInfo2.data.header.previous_hash)}}},[t._v(" "+t._s(t.previousBlockInfo2.data.header.previous_hash)),r("span",{staticStyle:{color:"red"}},[t._v("(点击查看区块信息)")])])],1)],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v(" 数据Hash： "),r("el-link",{attrs:{underline:!1,type:"success"}},[t._v(t._s(t.previousBlockInfo2.data.header.data_hash))])],1)],1)],1)])],1),r("el-col",{attrs:{span:16}},[r("div",[r("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"溯源编号"},model:{value:t.traceId,callback:function(e){t.traceId=e},expression:"traceId"}}),t._v(" "),r("el-button",{attrs:{type:"success"},on:{click:t.query}},[t._v("查询")])],1),r("br"),r("div",[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form",[r("el-form-item",[r("span",{staticStyle:{color:"#13CE66"}},[t._v("产品基本信息")])]),r("el-form-item",{attrs:{label:"生产厂商负:"}},[t._v(t._s(t.productData.factory))]),r("el-form-item",{attrs:{label:"生产厂商负责人:"}},[t._v(t._s(t.productData.leader))]),r("el-form-item",{attrs:{label:"电话:"}},[t._v(t._s(t.productData.leader_tel))]),r("el-form-item",{attrs:{label:"净含量:"}},[t._v(t._s(t.productData.Net_Content))]),r("el-form-item",{attrs:{label:"生产车间:"}},[t._v(t._s(t.productData.workshop))]),r("el-form-item",{attrs:{label:"生产工时"}},[t._v(t._s(t.productData.work_hours))]),r("el-form-item",{attrs:{label:"保存方法"}},[t._v(t._s(t.productData.keep_mathod))]),r("el-form-item",{attrs:{label:"食用推荐"}},[t._v(t._s(t.productData.cooking_recommend))])],1)],1),r("el-col",{attrs:{span:6}},[r("el-form",[r("el-form-item",[r("span",{staticStyle:{color:"#13CE66"}},[t._v("零售商信息")])]),r("el-form-item",{attrs:{label:"产品ID:"}},[t._v(t._s(t.retailerInfo.product_id))]),r("el-form-item",{attrs:{label:"产品名称:"}},[t._v(t._s(t.productData.product_name))]),r("el-form-item",{attrs:{label:"零售点:"}},[t._v(t._s(t.retailerInfo.retailer))]),r("el-form-item",{attrs:{label:"负责人:"}},[t._v(t._s(t.retailerInfo.retailer_name))]),r("el-form-item",{attrs:{label:"电话"}},[t._v(t._s(t.retailerInfo.retailer_tel))])],1)],1),r("el-col",{attrs:{span:12}},[r("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"种植过程",name:"1"}},[r("el-row",{attrs:{gutter:8}},[t._l(t.cropsProcessDetailsArray,(function(e,a){return r("el-col",{key:a,staticStyle:{"padding-top":"10px"},attrs:{span:24}},[r("el-card",{staticStyle:{"border-color":"#42b983"}},[r("el-col",{attrs:{span:12}},[r("el-row",[r("el-col",{attrs:{span:24}},[t._v("生长情况："+t._s(e.grow_status))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("光照情况："+t._s(e.illumination_status))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("水分："+t._s(e.water_content))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("温度："+t._s(e.temperature))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("记录时间："+t._s(e.record_time))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("备注："+t._s(e.remarks))])],1)],1),r("el-col",{attrs:{span:12}},[r("img",{staticStyle:{width:"100%",height:"11.05rem"},attrs:{src:e.crops_grow_photo_url}})])],1)],1)})),r("br")],2)],1),r("el-tab-pane",{attrs:{label:"流通行为",name:"2"}},[r("div",{staticClass:"block"},t._l(t.cropsDriverArray,(function(e,a){return r("el-timeline",[r("el-timeline-item",{attrs:{timestamp:e.transport_to_chain_time,placement:"top"}},[r("el-card",[r("h4",{staticStyle:{color:"red"}},[t._v("经过地:"+t._s(e.transport_to_address))]),r("p",[t._v("物流ID:"+t._s(e.transport_id))]),r("p",[t._v("司机:"+t._s(e.driver_name))]),r("p",[t._v("电话:"+t._s(e.driver_tel))]),r("p",[t._v("备注:"+t._s(e.remarks))])])],1)],1)})),1)]),r("el-tab-pane",{attrs:{label:"厂商质检",name:"3"}},[r("el-card",{staticStyle:{"border-color":"#42b983"}},[r("el-col",{attrs:{span:12}},[r("el-row",[r("el-col",{attrs:{span:24}},[t._v("负责人："+t._s(t.machingInfo.leader))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("电话："+t._s(t.machingInfo.leader_tel))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("原料厂商："+t._s(t.machingInfo.factory_name))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("入厂时间："+t._s(t.machingInfo.in_factory_time))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("出厂时间："+t._s(t.machingInfo.out_factory_time))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("检测结果："+t._s(t.machingInfo.testing_result))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("备注："+t._s(t.machingInfo.remarks))])],1),r("br")],1),r("el-col",{attrs:{span:12}},[r("img",{staticStyle:{width:"100%",height:"21.05rem"},attrs:{src:t.machingInfo.testing_photo_url}})])],1)],1),r("el-tab-pane",{attrs:{label:"生产行为",name:"4"}},[r("el-row",{attrs:{gutter:8}},[t._l(t.operationArray,(function(e,a){return r("el-col",{key:a,staticStyle:{"padding-top":"10px"},attrs:{span:24}},[r("el-card",{staticStyle:{"border-color":"#42b983"}},[r("el-row",[r("el-col",{attrs:{span:24}},[t._v("操作ID："+t._s(e.operation_id))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("操作人："+t._s(e.operation_people_name))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("操作人电话："+t._s(e.operation_people_tel))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("操作时间："+t._s(e.time))])],1),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("操作内容："+t._s(e.work_content))])],1)],1)],1)})),r("br")],2)],1),r("el-tab-pane",{attrs:{label:"农产信息",name:"5"}},[r("el-card",{staticStyle:{"border-color":"#42b983"}},[r("el-row",[r("el-col",{attrs:{span:24}},[t._v("农产名字："+t._s(t.cropsDetails.crops_name))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("种植户："+t._s(t.cropsDetails.farmer_name))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("电话："+t._s(t.cropsDetails.farmer_tel))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("地址："+t._s(t.cropsDetails.address))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("种植方式："+t._s(t.cropsDetails.plant_mode))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("年度："+t._s(t.cropsDetails.year))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("套袋方式："+t._s(t.cropsDetails.bagging_status))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("使用肥料："+t._s(t.cropsDetails.fertilizer_name))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("育苗周期："+t._s(t.cropsDetails.grow_seedlings_cycle))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("灌溉周期："+t._s(t.cropsDetails.irrigation_cycle))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("除草周期："+t._s(t.cropsDetails.weed_cycle))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("施肥周期："+t._s(t.cropsDetails.apply_fertilizer_cycle))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("注册时间："+t._s(t.cropsDetails.register_time))])],1),r("br"),r("br"),r("el-row",[r("el-col",{attrs:{span:24}},[t._v("备注："+t._s(t.cropsDetails.remarks))])],1),r("br")],1)],1)],1)],1)],1)],1)])],1),r("BlockInfo",{ref:"getBlockInfoRef"})],1)},o=[],l=(r("a9e3"),r("e9c4"),r("bc3a"),r("3645")),s={components:{BlockInfo:l["default"]},data:function(){return{queryBlockByNumDrawer:!1,channelBlockInfo:"",blockInfo:"",previousBlockInfo:"",previousBlockInfo2:"",open:!1,blockInfoHash:"",option:{data:[]},traceId:"",retailerInfo:"",productData:"",activeName:"1",cropsProcessDetailsArray:[],cropsDriverArray:[],machingInfo:"",operationArray:[],cropsDetails:""}},created:function(){var t=this;this.$httpBlock.get(this.$httpUrl+"/blockexplorerapi/channelBlockInfo").then((function(e){t.channelBlockInfo=e;var r={title:"区块高度",subtitle:"实时",count:e.data.height.low,text:"当前区块高度",color:"rgb(27, 201, 142)",key:"高"};t.option.data.push(r);var a=Number(t.channelBlockInfo.data.height.low-1);t.$httpBlock.get(t.$httpUrl+"/blockexplorerapi/queryBlockInfo?number="+a).then((function(e){t.blockInfo=e})).catch((function(t){console.log("err "+t)}));var o=Number(t.channelBlockInfo.data.height.low-2);t.$httpBlock.get(t.$httpUrl+"/blockexplorerapi/queryBlockInfo?number="+o).then((function(e){t.previousBlockInfo=e})).catch((function(t){console.log("err "+t)}));var l=Number(t.channelBlockInfo.data.height.low-3);t.$httpBlock.get(t.$httpUrl+"/blockexplorerapi/queryBlockInfo?number="+l).then((function(e){t.previousBlockInfo2=e})).catch((function(t){console.log("err "+t)}))})).catch((function(t){console.log("err "+t)}))},methods:{handleClick:function(){var t=this;"1"===this.activeName&&this.$httpBlock.get(this.$httpUrl+"/farmerapi/queryCropsProcessByCropsId?id="+this.productData.crops_id).then((function(e){for(var r=[],a=0;a<e.data.length;a++)r.push(e.data[a].Record);t.cropsProcessDetailsArray=r})).catch((function(t){})),"2"===this.activeName&&this.$httpBlock.get(this.$httpUrl+"/driverapi/queryTransportByCropsId?id="+this.productData.crops_id).then((function(e){var r=[];t.len=e.data.length;for(var a=0;a<e.data.length;a++)r.push(e.data[a].Record);t.cropsDriverArray=r})).catch((function(t){})),"3"===this.activeName&&this.$httpBlock.get(this.$httpUrl+"/materialapi/queryMachiningByCropsId?id="+this.productData.crops_id).then((function(e){t.machingInfo=e.data[0].Record})).catch((function(t){})),"4"===this.activeName&&this.$httpBlock.get(this.$httpUrl+"/productapi/queryOperationByCropsId?id="+this.productData.crops_id).then((function(e){for(var r=[],a=0;a<e.data.length;a++)r.push(e.data[a].Record);t.operationArray=r})).catch((function(e){t.msgError("查询异常 "+e)})),"5"===this.activeName&&this.$httpBlock.get(this.$httpUrl+"/farmerapi/queryCropsById?id="+this.productData.crops_id).then((function(e){t.cropsDetails=e.data})).catch((function(t){}))},query:function(){var t=this;this.$httpBlock.get(this.$httpUrl+"/retailerapi/queryRetailerById?id="+this.traceId).then((function(e){t.retailerInfo=e.data,t.$httpBlock.get(t.$httpUrl+"/productapi/queryProductInfoByCropsId?id="+e.data.crops_id).then((function(e){t.productData=e.data[0].Record,t.handleClick()})).catch((function(e){t.msgError("查询异常 "+e)}))})).catch((function(t){console.log("调用失败 "+JSON.stringify(t))}))},queryInfo:function(t){var e=this;this.open=!0,this.$httpBlock.get(this.$httpUrl+"/blockexplorerapi/queryBlockBuHash?hash="+t).then((function(t){e.blockInfoHash=t,e.$refs.getBlockInfoRef.init(t)})).catch((function(t){console.log("err "+t)}))},getHash:function(){var t=this,e=Number(this.channelBlockInfo.data.height.low);this.$httpBlock.get(this.$httpUrl+"/blockexplorerapi/queryBlockInfo?number="+e).then((function(e){t.blockInfo=e})).catch((function(t){console.log("err "+t)}))},queryBlockByNum:function(){this.queryBlockByNumDrawer=!0}}},n=s,i=(r("9596"),r("2877")),c=Object(i["a"])(n,a,o,!1,null,"671cbfac",null);e["default"]=c.exports},9596:function(t,e,r){"use strict";r("d5b0")},d5b0:function(t,e,r){},dd7b:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules}},[r("h3",{staticClass:"title"},[t._v("区块链防伪溯源平台")]),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"验证码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.code,callback:function(e){t.$set(t.loginForm,"code",e)},expression:"loginForm.code"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),r("div",{staticClass:"login-code"},[r("img",{staticClass:"login-code-img",attrs:{src:t.codeUrl},on:{click:t.getCode}})])],1),r("el-checkbox",{staticStyle:{margin:"0px 0px 25px 0px"},model:{value:t.loginForm.rememberMe,callback:function(e){t.$set(t.loginForm,"rememberMe",e)},expression:"loginForm.rememberMe"}},[t._v("记住密码")]),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,size:"medium",type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t.loading?r("span",[t._v("登 录 中...")]):r("span",[t._v("登 录")])])],1),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{size:"medium",type:"success"},nativeOn:{click:function(e){return e.preventDefault(),t.roTrace(e)}}},[r("span",[t._v("消费者溯源")])])],1)],1),r("el-dialog",{attrs:{title:"农产品溯源",visible:t.drawer,width:"95%"},on:{"update:visible":function(e){t.drawer=e}}},[r("el-divider",{attrs:{"content-position":"left"}},[t._v("农产品溯源")]),r("div",[r("Trace")],1)],1)],1)},o=[],l=r("7ded"),s=r("a78e"),n=r.n(s),i=r("720d"),c=r.n(i),p="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdH\nnzkXSOVOZbFu/TJhZ7rFAN+eaGkl3C4buccQd/EjEsj9ir7ijT7h96MCAwEAAQ==",d="MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAqhHyZfSsYourNxaY\n7Nt+PrgrxkiA50efORdI5U5lsW79MmFnusUA355oaSXcLhu5xxB38SMSyP2KvuKN\nPuH3owIDAQABAkAfoiLyL+Z4lf4Myxk6xUDgLaWGximj20CUf+5BKKnlrK+Ed8gA\nkM0HqoTt2UZwA5E2MzS4EI2gjfQhz5X28uqxAiEA3wNFxfrCZlSZHb0gn2zDpWow\ncSxQAgiCstxGUoOqlW8CIQDDOerGKH5OmCJ4Z21v+F25WaHYPxCFMvwxpcw99Ecv\nDQIgIdhDTIqD2jfYjPTY8Jj3EDGPbH2HHuffvflECt3Ek60CIQCFRlCkHpi7hthh\nYhovyloRYsM+IS9h/0BzlEAuO0ktMQIgSPT3aFAgJYwKpqRYKlLDVcflZFCKY7u3\nUP8iWi1Qw0Y=";function u(t){var e=new c.a;return e.setPublicKey(p),e.encrypt(t)}function h(t){var e=new c.a;return e.setPrivateKey(d),e.decrypt(t)}var _=r("5167"),f={name:"Login",data:function(){return{codeUrl:"",cookiePassword:"",loginForm:{username:"admin",password:"admin123",rememberMe:!1,code:"",uuid:""},loginRules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}],code:[{required:!0,trigger:"change",message:"验证码不能为空"}]},loading:!1,redirect:void 0,drawer:!1}},components:{Trace:_["default"]},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},created:function(){this.getCode(),this.getCookie()},methods:{roTrace:function(){this.drawer=!0},getCode:function(){var t=this;Object(l["a"])().then((function(e){t.codeUrl="data:image/gif;base64,"+e.img,t.loginForm.uuid=e.uuid}))},getCookie:function(){var t=n.a.get("username"),e=n.a.get("password"),r=n.a.get("rememberMe");this.loginForm={username:void 0===t?this.loginForm.username:t,password:void 0===e?this.loginForm.password:h(e),rememberMe:void 0!==r&&Boolean(r)}},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){e&&(t.loading=!0,t.loginForm.rememberMe?(n.a.set("username",t.loginForm.username,{expires:30}),n.a.set("password",u(t.loginForm.password),{expires:30}),n.a.set("rememberMe",t.loginForm.rememberMe,{expires:30})):(n.a.remove("username"),n.a.remove("password"),n.a.remove("rememberMe")),t.$store.dispatch("Login",t.loginForm).then((function(){t.$router.push({path:t.redirect||"/"})})).catch((function(){t.loading=!1,t.getCode()})))}))}}},m=f,v=(r("eecc"),r("2877")),b=Object(v["a"])(m,a,o,!1,null,null,null);e["default"]=b.exports},eecc:function(t,e,r){"use strict";r("2912")}}]);